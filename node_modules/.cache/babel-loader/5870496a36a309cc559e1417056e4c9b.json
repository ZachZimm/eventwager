{"ast":null,"code":"var _jsxFileName = \"/home/zach/projects/eventwager/src/App.js\",\n    _s = $RefreshSig$();\n\nimport logo from \"./logo.svg\";\nimport React, { useState } from \"react\";\nimport './App.css';\nimport { eventWager } from './abi/abi';\nimport { token } from './abi/abi';\nimport Web3 from \"web3\"; // const BigNumber = require('bignumber.js');\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst web3 = new Web3(Web3.givenProvider);\nconst contractAddress = \"0x7f7562BfD166706Ec9E9633Aa339B67B3f3Ec23b\";\nconst tokenAddress = \"0xa711E0B700a56A897E18E0f79A14DD2c6b2c5C5d\";\nconst eventWagerContract = new web3.eth.Contract(eventWager, contractAddress);\nconst tokenContract = new web3.eth.Contract(token, tokenAddress);\n\nfunction App() {\n  _s();\n\n  // Getter hooks\n  const [retrievedWager, setRetrievedWager] = useState(0);\n  const [currentPot, setRetrievedCurrentPot] = useState(0);\n  const [retrievedUserSide, setRetrievedUserSide] = useState(0);\n  const [retrievedSides, setRetrievedSides] = useState([\"1\", \"2\"]); // Setter hooks\n\n  const [newWager, setWager] = useState(0);\n  const [userSide, setUserSide] = useState(0);\n  const [winningSide, setWinningSide] = useState(0); // Getter methods\n\n  const getWager = async t => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const post = await eventWagerContract.methods.getWager(account).call(); // var amnt = post / 10**18; // Convert from Wei\n\n    const _wager = web3.utils.fromWei(post);\n\n    setRetrievedWager(_wager);\n  };\n\n  const getCurrentPot = async t => {\n    t.preventDefault(); // const accounts = await window.ethereum.enable();\n    // const account = accounts[0];\n\n    const post = await eventWagerContract.methods.getPot().call();\n\n    const _pot = web3.utils.fromWei(post); // getSides(t);\n\n\n    setRetrievedCurrentPot(_pot);\n  };\n\n  const getSides = async t => {\n    t.preventDefault();\n    const post = await eventWagerContract.methods.getSides().call();\n    var substrings = post.split('||&&||');\n    setRetrievedSides(substrings);\n  };\n\n  const getUserSide = async t => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const post = await eventWagerContract.methods.getUserSide(account).call();\n    setRetrievedUserSide1(post);\n  }; // Setter methods\n\n\n  const wager = async t => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n\n    const _wager = web3.utils.toWei(newWager); // Debug\n\n\n    console.log(account); // console.log(web3.utils.fromWei(_wager));\n    // const bal = await tokenContract.methods.balanceOf(account).call();\n    // console.log(web3.utils.fromWei(bal));\n    // console.log(accounts);\n\n    const gas = await eventWagerContract.methods.wager(userSide, _wager).estimateGas();\n    const post = await eventWagerContract.methods.wager(userSide, _wager).send({\n      from: account,\n      gas\n    });\n    getWager(t);\n    getCurrentPot(t);\n  };\n\n  const endRound = async t => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await eventWagerContract.methods.wager(winningSide).estimateGas();\n    const post = await eventWagerContract.methods.wager(winningSide).send({\n      from: account,\n      gas\n    });\n  };\n\n  const beginRound = async t => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await eventWagerContract.methods.beginRound().estimateGas();\n    const post = await eventWagerContract.methods.beginRound().send({\n      from: account,\n      gas\n    });\n  };\n\n  const closeBetting = async t => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await eventWagerContract.methods.closeBetting().estimateGas();\n    const post = await eventWagerContract.methods.closeBetting().call({\n      from: account,\n      gas\n    });\n  };\n\n  const allowSpend = async t => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0]; // (2**256)-1)\n    // let amnt = new BigNumber(999 * (10**18));\n    // let _amnt = await amnt.toString();\n    // console.log(_amnt);\n\n    const gas = tokenContract.methods.approve(contractAddress, web3.utils.toWei('9999')).estimateGas();\n    const post = tokenContract.methods.approve(contractAddress, web3.utils.toWei('9999')).send({\n      from: account\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upper\",\n      children: [\"1: \", retrievedSides[0], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 31\n      }, this), \" 2: \", retrievedSides[1]]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: wager,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Enter your wager and side:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            type: \"text\",\n            name: \"name\",\n            onChange: t => setWager(t.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            type: \"text\",\n            name: \"side\",\n            onChange: t => setUserSide(t.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          type: \"submit\",\n          value: \"Submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          onClick: getWager,\n          type: \"button\",\n          children: \"Your current wager:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), retrievedWager]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          onClick: getCurrentPot,\n          type: \"button\",\n          children: \"Click for current pot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), currentPot]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          onClick: allowSpend,\n          type: \"button\",\n          children: \"Click to approve\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lower\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form\",\n          onSubmit: beginRound,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            type: \"text\",\n            name: \"name\",\n            onChange: t => setWager(t.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            type: \"text\",\n            name: \"side\",\n            onChange: t => setUserSide(t.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            type: \"submit\",\n            value: \"Submit\",\n            children: \"Begin Round\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"TIp8dRGGYb5AXlYbIYoSmjJqxjc=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/zach/projects/eventwager/src/App.js"],"names":["React","useState","eventWager","token","Web3","web3","givenProvider","contractAddress","tokenAddress","eventWagerContract","eth","Contract","tokenContract","App","retrievedWager","setRetrievedWager","currentPot","setRetrievedCurrentPot","retrievedUserSide","setRetrievedUserSide","retrievedSides","setRetrievedSides","newWager","setWager","userSide","setUserSide","winningSide","setWinningSide","getWager","t","preventDefault","accounts","window","ethereum","enable","account","post","methods","call","_wager","utils","fromWei","getCurrentPot","getPot","_pot","getSides","substrings","split","getUserSide","setRetrievedUserSide1","wager","toWei","console","log","gas","estimateGas","send","from","endRound","beginRound","closeBetting","allowSpend","approve","target","value"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport React, { useState } from \"react\";\nimport './App.css';\nimport { eventWager } from './abi/abi';\nimport { token } from './abi/abi';\nimport Web3 from \"web3\";\n\n// const BigNumber = require('bignumber.js');\nconst web3 = new Web3(Web3.givenProvider);\nconst contractAddress = \"0x7f7562BfD166706Ec9E9633Aa339B67B3f3Ec23b\";\nconst tokenAddress = \"0xa711E0B700a56A897E18E0f79A14DD2c6b2c5C5d\";\nconst eventWagerContract = new web3.eth.Contract(eventWager, contractAddress);\nconst tokenContract = new web3.eth.Contract(token, tokenAddress);\n\nfunction App() {\n  // Getter hooks\n  const [retrievedWager, setRetrievedWager] = useState(0);\n  const [currentPot, setRetrievedCurrentPot] = useState(0);\n  const [retrievedUserSide, setRetrievedUserSide] = useState(0);\n  const [retrievedSides, setRetrievedSides] = useState([\"1\",\"2\"]);\n\n  // Setter hooks\n  const [newWager, setWager] = useState(0);\n  const [userSide, setUserSide] = useState(0);\n  const [winningSide, setWinningSide] = useState(0);\n\n  // Getter methods\n  const getWager = async (t) => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const post = await eventWagerContract.methods.getWager(account).call();\n    // var amnt = post / 10**18; // Convert from Wei\n    const _wager = web3.utils.fromWei(post);\n    setRetrievedWager(_wager);\n  };\n\n  const getCurrentPot = async (t) => {\n    t.preventDefault();\n    // const accounts = await window.ethereum.enable();\n    // const account = accounts[0];\n    const post = await eventWagerContract.methods.getPot().call();\n    const _pot = web3.utils.fromWei(post);\n    // getSides(t);\n    setRetrievedCurrentPot(_pot);\n  };\n\n  const getSides = async (t) => {\n    t.preventDefault();\n    const post = await eventWagerContract.methods.getSides().call();\n    var substrings = post.split('||&&||');\n    setRetrievedSides(substrings);\n  };\n\n  const getUserSide = async (t) => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();    const post = await eventWagerContract.methods.getUserSide(account).call();\n    setRetrievedUserSide1(post);\n  };\n\n\n\n  // Setter methods\n  const wager = async (t) => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const _wager = web3.utils.toWei(newWager);\n      \n      // Debug\n    console.log(account);\n    // console.log(web3.utils.fromWei(_wager));\n    // const bal = await tokenContract.methods.balanceOf(account).call();\n    // console.log(web3.utils.fromWei(bal));\n    // console.log(accounts);\n\n    const gas = await eventWagerContract.methods.wager(userSide, _wager).estimateGas();\n    const post = await eventWagerContract.methods.wager(userSide, _wager).send({ from: account, gas });\n    getWager(t);\n    getCurrentPot(t);\n  };\n\n  const endRound = async (t) => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await eventWagerContract.methods.wager(winningSide).estimateGas();\n    const post = await eventWagerContract.methods.wager(winningSide).send({ from: account, gas });\n  };\n\n  const beginRound = async (t) => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await eventWagerContract.methods.beginRound().estimateGas();\n    const post = await eventWagerContract.methods.beginRound().send({ from: account, gas });\n  };\n\n  const closeBetting = async (t) => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await eventWagerContract.methods.closeBetting().estimateGas();\n    const post = await eventWagerContract.methods.closeBetting().call({from: account, gas });\n  };\n\n  const allowSpend = async (t) => {\n    t.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    // (2**256)-1)\n    // let amnt = new BigNumber(999 * (10**18));\n    // let _amnt = await amnt.toString();\n    // console.log(_amnt);\n    const gas = tokenContract.methods.approve(contractAddress, web3.utils.toWei('9999')).estimateGas();\n    const post = tokenContract.methods.approve(contractAddress, web3.utils.toWei('9999')).send({ from: account });\n  };\n  \n\n  return (\n    <div className=\"main\">\n      <div className=\"upper\">\n        1: {retrievedSides[0]}<br/> 2: {retrievedSides[1]}\n      </div>\n      <div className=\"card\">\n        <form className=\"form\" onSubmit={wager}>\n          <label>\n            Enter your wager and side:\n            <br />\n            <input\n              className=\"input\"\n              type=\"text\"\n              name=\"name\"\n              onChange={(t) => setWager(t.target.value)}\n            />\n            <input\n              className=\"input\"\n              type=\"text\"\n              name=\"side\"\n              onChange={(t) => setUserSide(t.target.value)}\n            />\n          </label>\n          <button className=\"button\" type=\"submit\" value=\"Submit\">\n            Submit\n          </button>\n        </form>\n        <br />\n        <div>\n          <button className=\"button\" onClick={getWager} type=\"button\">\n            Your current wager: \n          </button>\n            {retrievedWager}\n        </div>\n        <br /> <br />\n        <div>\n          <button className=\"button\" onClick={getCurrentPot} type=\"button\">\n            Click for current pot\n          </button>\n          {currentPot}\n        </div>\n        <br /><br />\n        <div>\n          <button className=\"button\" onClick={allowSpend} type=\"button\">\n              Click to approve\n          </button>\n        </div>\n        <div className=\"lower\">\n          <form className=\"form\" onSubmit={beginRound}>\n          <input\n              className=\"input\"\n              type=\"text\"\n              name=\"name\"\n              onChange={(t) => setWager(t.target.value)}\n            />\n            <input\n              className=\"input\"\n              type=\"text\"\n              name=\"side\"\n              onChange={(t) => setUserSide(t.target.value)}\n            />\n           <button className=\"button\" type=\"submit\" value=\"Submit\">\n             Begin Round\n            </button>\n          </form>\n      </div>\n        \n        </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}